<app-header></app-header>

<main class="consulta-page">
  <!-- Hero Section -->
  <section class="ocean-hero">
    <h1>Oceano de Dados</h1>
    <p>Selecione um servi√ßo e envie seu arquivo para an√°lise.</p>
  </section>

  <!-- Seletor de Servi√ßos (Sempre vis√≠vel ou esconde ap√≥s selecionar) -->
  <section class="selector-section" *ngIf="!selectedService">
    <app-consulta-selector (onSelect)="handleSelection($event)"></app-consulta-selector>
  </section>

  <!-- √Årea de Upload (Aparece ap√≥s selecionar o servi√ßo) -->
  <section class="upload-section" *ngIf="selectedService">
    <div class="container">
      <div class="upload-card">
        <button class="btn-back" (click)="selectedService = null">‚Üê Voltar aos servi√ßos</button>
        
        <div class="service-badge">Servi√ßo selecionado: <strong>{{ selectedService | uppercase }}</strong></div>
        
        <h2>Fa√ßa o upload do seu arquivo XLSX</h2>
        <p>O arquivo deve conter os dados para a consulta de {{ selectedService }}.</p>

        <div class="drop-zone" (click)="fileInput.click()">
          <span class="icon">üìä</span>
          <p>Clique ou arraste o arquivo Excel aqui</p>
          <input type="file" #fileInput (change)="onFileChange($event)" accept=".xlsx, .xls" hidden>
        </div>

        <!-- Feedback de Sucesso -->
        <div class="success-msg" *ngIf="jsonData">
          ‚úÖ Arquivo processado com sucesso! {{ jsonData.length }} registros encontrados.
          <button class="btn-process">Iniciar Processamento no Servidor</button>
        </div>
      </div>
    </div>
  </section>
</main>

<app-footer></app-footer>
