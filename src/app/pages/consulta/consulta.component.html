<app-header></app-header>

<main class="consulta-page">
  
  <!-- Nova sintaxe @if do Angular 18 -->
  @if (!selectedService) {
    <section class="selector-section">
      <app-consulta-selector (onSelect)="handleSelection($event)"></app-consulta-selector>
    </section>
  } @else {
    <section class="upload-section">
      <div class="container">
        <div class="upload-card">
          <button class="btn-back" (click)="selectedService = null">‚Üê Voltar aos servi√ßos</button>
          
          <div class="service-badge">Servi√ßo selecionado: <strong>{{ selectedService | uppercase }}</strong></div>
          
          <h2>Fa√ßa o upload do seu arquivo XLSX</h2>
          <p>O arquivo deve conter os dados para a consulta de {{ selectedService }}.</p>

          <div class="drop-zone" (click)="fileInput.click()">
            <span class="icon">üìä</span>
            <p>Clique ou arraste o arquivo Excel aqui</p>
            <input type="file" #fileInput (change)="onFileChange($event)" accept=".xlsx, .xls" hidden>
          </div>

          @if (jsonData) {
            <div class="success-msg">
              ‚úÖ Arquivo processado com sucesso! {{ jsonData.length }} registros encontrados.
              <button class="btn-process">Iniciar Processamento no Servidor</button>
            </div>
          }
        </div>
      </div>
    </section>
  }
</main>

<app-footer></app-footer>
